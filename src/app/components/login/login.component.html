<div class="layout-container">
  <nz-card class="card-container" [nzBordered]="false">
    <form 
      nz-form 
      [formGroup]="form" 
      [class.disabled]="isDataLoading" 
      (ngSubmit)="submit()">

      <div class="logo-container">
         <img 
          srcset="assets/logo.webp 2x, assets/logo.webp 3x" 
          width="150" 
          height="150" 
          alt="Logo"
        >
      </div>

      <h4>Login</h4>
      
      <h5>Sign in to your account</h5>

      <nz-form-item>
        <nz-form-control 
          [nzErrorTip]="errorTemplate"  
          [nzHasFeedback]="hasFeedback('username')">
          <nz-input-group nzPrefixIcon="user">
            <input 
              type="text" 
              nz-input 
              formControlName="username" 
              placeholder="Username" 
              autocomplete="off"
            />
          </nz-input-group>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-control 
          [nzErrorTip]="errorTemplate"
          [nzHasFeedback]="hasFeedback('password')">
          <nz-input-group nzPrefixIcon="lock" nzSuffix>
            <input 
              [type]="showPassword ? 'text' : 'password'" 
              nz-input 
              formControlName="password" 
              placeholder="Password" 
              autocomplete="off"
            />
            <i 
              *ngIf="form.get('password')?.value"
              nz-icon 
              [nzType]="showPassword ? 'eye-invisible' : 'eye'" 
              nzTheme="outline" 
              (click)="togglePasswordVisibility()"
              style="cursor: pointer;">
            </i>
          </nz-input-group> 
        </nz-form-control>
      </nz-form-item>

      <ng-template #errorTemplate let-control>
        <span *ngIf="control && getErrorMessage(control)">
          {{ getErrorMessage(control) }}
        </span>
      </ng-template>

      <div nz-row class="login-form-margin">
        <div nz-col [nzSpan]="12" [nzOffset]="12">
          <a 
            routerLink="/reset_password" 
            class="login-form-forgot">
            Forgot password?
          </a>
        </div>
      </div>

      <button 
        nz-button 
        nzType="primary" 
        class="login-form-button"
        [nzLoading]="isDataLoading"
        [disabled]="form.invalid || isDataLoading">
        Sign in
      </button>
    </form>
  </nz-card>
</div>